; ===========================================================
; 3D BIFURCATION TEMPLATE (GOLDEN MASTER)
; Validated for ANSYS Fluent 2025 R2 (25.2)
; ===========================================================
/file/set-tui-version "25.2"
/file/read-case "bifurcation_angle30.msh"

; ---------- Models ----------
/define/models/solver/pressure-based yes
/define/models/viscous/laminar yes

; ---------- Materials ----------
/define/materials/copy fluid water-liquid
/define/boundary-conditions/fluid fluid_domain yes water-liquid
no
no
no
no
0
no
0
no
0
no
0
no
0
no
1
no
no
no
no

; ---------- Boundary Conditions ----------
; INLET
/define/boundary-conditions/velocity-inlet inlet
no
no
yes
yes
no
0.03418089521379325
no
0

; OUTLETS
/define/boundary-conditions/pressure-outlet outlet_1
yes
no
0
no
yes
yes
no
no
no

/define/boundary-conditions/pressure-outlet outlet_2
yes
no
0
no
yes
yes
no
no
no

; WALLS
/define/boundary-conditions/wall wall-fluid_domain
no
no

; ---------- Solution Methods ----------
/solve/set/p-v-coupling 24
/solve/set/discretization-scheme/pressure 12
/solve/set/discretization-scheme/mom 4

; ---------- Solution Controls ----------
/solve/monitors/residual/convergence-criteria 5e-2 1e-5 1e-5 1e-5
/solve/monitors/residual/print? yes

; ---------- Initialization ----------
/solve/initialize/compute-defaults/velocity-inlet inlet
/solve/initialize/initialize-flow

; ---------- Solve ----------
/solve/iterate 5000

; ===========================================================
; DATA EXPORT (batch mode auto-overwrites)
; ===========================================================

; Create surface from interior zone for export
/surface/zone-surface interior-data interior-fluid_domain

; Save case and data
/file/write-case-data "results/bifurcation_angle30/Re600/bifurcation_Re600.cas.h5"

; Export interior field data
/file/export/ascii "results/bifurcation_angle30/Re600/interior_full_Re600.csv" interior-data () no x-coordinate y-coordinate z-coordinate pressure x-velocity y-velocity z-velocity velocity-magnitude ()
no

; Export wall data
/file/export/ascii "results/bifurcation_angle30/Re600/wall_data_Re600.csv" wall-fluid_domain () no x-coordinate y-coordinate z-coordinate pressure wall-shear x-wall-shear y-wall-shear z-wall-shear ()
no

; Export outlet data
/file/export/ascii "results/bifurcation_angle30/Re600/outlets_Re600.csv" outlet_1 outlet_2 () no x-coordinate y-coordinate z-coordinate pressure velocity-magnitude ()
no

/exit yes
